import g from"react";import{matchResourceFromRoute as L,ResourceContext as k}from"@refinedev/core";import{useCallback as h,useContext as A}from"react";import{parse as y,stringify as E}from"qs";import{useNavigate as P,useLocation as C,Link as I,matchPath as S,useParams as F}from"react-router-dom";var d=e=>{if(typeof e>"u")return e;let t=Number(e);return`${t}`===e?t:e};var x={addQueryPrefix:!0,skipNulls:!0,arrayFormat:"indices",encode:!1,encodeValuesOnly:!0},D={go:()=>{let{search:e,hash:t}=C(),r=P();return h(({to:s,type:n,query:o,hash:a,options:{keepQuery:c,keepHash:f}={}})=>{let u={...c&&e&&y(e,{ignoreQueryPrefix:!0}),...o};u.to&&(u.to=encodeURIComponent(`${u.to}`));let m=Object.keys(u).length>0,p=`#${(a||f&&t||"").replace(/^#/,"")}`,U=p.length>1,R=`${s||""}${m?E(u,x):""}${U?p:""}`;return n==="path"?R:r(R,{replace:n==="replace"})},[t,e,r])},back:()=>{let e=P();return h(()=>{e(-1)},[e])},parse:()=>{var c;let e=F(),{pathname:t,search:r}=C(),{resources:i}=A(k),{resource:s,action:n,matchedRoute:o}=g.useMemo(()=>L(t,i),[i,t]);return Object.entries(e).length===0&&o&&(e=((c=S(o,t))==null?void 0:c.params)||{}),h(()=>{let f=y(r,{ignoreQueryPrefix:!0}),u={...e,...f};return{...s&&{resource:s},...n&&{action:n},...(e==null?void 0:e.id)&&{id:decodeURIComponent(e.id)},pathname:t,params:{...u,current:d(u.current),pageSize:d(u.pageSize),to:u.to?decodeURIComponent(u.to):void 0}}},[t,r,e,s,n])},Link:g.forwardRef(function(t,r){return g.createElement(I,{...t,ref:r})})};import b from"react";import{useResource as H}from"@refinedev/core";import v from"react";import{Route as j}from"react-router-dom";var B=(e,t)=>{let{name:r,list:i,create:s,show:n,edit:o}=e;if(typeof i=="string"&&t==="list")return i;if(typeof i=="object"&&t==="list")return i.path;if(typeof s=="string"&&t==="create")return s;if(typeof s=="object"&&t==="create")return s.path;if(typeof n=="string"&&t==="show")return n;if(typeof n=="object"&&t==="show")return n.path;if(typeof o=="string"&&t==="edit")return o;if(typeof o=="object"&&t==="edit")return o.path;let a=`/${r}`,c=`${["edit","create","clone","show"].includes(t)?t:""}`,f=`${["edit","show","clone"].includes(t)?":id":""}`;return[a,c,f].filter(Boolean).join("/")},N=e=>e.flatMap(r=>{let i=[];return["list","show","edit","create"].forEach(s=>{let n=r[s];if(typeof n<"u"&&typeof n!="string"){let o=typeof n=="function"?n:n.component,a=B(r,s);i.push({action:s,element:o,path:a}),s==="create"&&i.push({action:"clone",element:o,path:a})}}),i.map(({action:s,element:n,path:o})=>{let a=v.createElement(n,null);return v.createElement(j,{key:`${s}-${o}`,path:o,element:a})})});import{Routes as M}from"react-router-dom";var G=({children:e})=>{let{resources:t}=H(),r=b.useMemo(()=>N(t),[t]);return e?e(r):b.createElement(M,null,r)};import{useResource as Q,useGetToPath as V}from"@refinedev/core";import K from"react";import{Navigate as O}from"react-router-dom";var q=({resource:e,meta:t})=>{let r=V(),{resource:i,resources:s}=Q(e),n=i||s.find(o=>o.list);if(n){let o=r({resource:n,action:"list",meta:t});return o?K.createElement(O,{to:o}):(console.warn("No resource is found to navigate to."),null)}return console.warn("No resource is found to navigate to."),null};import w from"react";import{useTranslate as X,useWarnAboutChange as W}from"@refinedev/core";import l from"react";import{UNSAFE_NavigationContext as z}from"react-router-dom";function J(e,t=!0){let{navigator:r}=l.useContext(z);l.useEffect(()=>{if(!t)return;let i=r.go,s=r.push;return r.push=(...n)=>{e()!==!1&&s(...n)},r.go=(...n)=>{e()!==!1&&i(...n)},()=>{r.push=s,r.go=i}},[r,e,t])}function T(e,t=!0,r,i=!1){let s=l.useCallback(o=>(o.preventDefault(),o.returnValue=e,o.returnValue),[e]);l.useEffect(()=>(t&&!i&&window.addEventListener("beforeunload",s),()=>{window.removeEventListener("beforeunload",s)}),[s,t,i]);let n=l.useCallback(()=>{let o=window.confirm(e);return o&&r&&r(),o},[e]);J(n,t)}import{useLocation as Y}from"react-router-dom";var _=({translationKey:e="warnWhenUnsavedChanges",message:t="Are you sure you want to leave? You have unsaved changes."})=>{let r=X(),{pathname:i}=Y(),{warnWhen:s,setWarnWhen:n}=W();w.useEffect(()=>()=>n==null?void 0:n(!1),[i]);let o=w.useMemo(()=>r(e,t),[e,t,r]);return T(o,s,()=>{n==null||n(!1)}),null};import Z from"react";import{Navigate as ee,useLocation as te}from"react-router-dom";var oe=({to:e})=>{let{pathname:t,search:r}=te(),i=`${t}${r}`,s=i.length>1?`?to=${encodeURIComponent(i)}`:"";return Z.createElement(ee,{to:`${e}${s}`})};import{useParsed as re,useTranslate as ne,generateDefaultDocumentTitle as se,useUserFriendlyName as ie}from"@refinedev/core";import $,{useLayoutEffect as ue}from"react";import{useLocation as ae}from"react-router-dom";function ce({handler:e}){var m;let t=ae(),{action:r,id:i,params:s,pathname:n,resource:o}=re(),a=ne(),c=ie(),f=(o==null?void 0:o.identifier)??(o==null?void 0:o.name),u=(o==null?void 0:o.label)??((m=o==null?void 0:o.meta)==null?void 0:m.label)??c(f,r==="list"?"plural":"singular");return ue(()=>{let p=se(a,o,r,`${i}`,u);e?document.title=e({action:r,resource:o,params:s,pathname:n,autoGeneratedTitle:p}):document.title=p},[t]),$.createElement($.Fragment,null)}import{useTranslate as fe}from"@refinedev/core";import{useEffect as me}from"react";var pe=e=>{let t=fe();return me(()=>{e&&(typeof e=="string"?document.title=t(e):document.title=t(e.i18nKey))},[e]),r=>{typeof r=="string"?document.title=t(r):document.title=t(r.i18nKey)}};export{oe as CatchAllNavigate,ce as DocumentTitleHandler,q as NavigateToResource,G as RefineRoutes,_ as UnsavedChangesNotifier,D as default,x as stringifyConfig,pe as useDocumentTitle};
//# sourceMappingURL=index.js.map