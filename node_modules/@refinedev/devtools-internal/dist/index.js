"use client"
var D=Object.create;var p=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var L=(r,e)=>{for(var s in e)p(r,s,{get:e[s],enumerable:!0})},d=(r,e,s,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of A(e))!F.call(r,t)&&t!==s&&p(r,t,{get:()=>e[t],enumerable:!(n=N(e,t))||n.enumerable});return r};var E=(r,e,s)=>(s=r!=null?D(b(r)):{},d(e||!r||!r.__esModule?p(s,"default",{value:r,enumerable:!0}):s,r)),M=r=>d(p({},"__esModule",{value:!0}),r);var K={};L(K,{getTrace:()=>l,getXRay:()=>I,useQuerySubscription:()=>C});module.exports=M(K);var g=E(require("error-stack-parser"));var O="renderWithHooks",T=r=>{let e=r.findIndex(s=>s.functionName===O);return e!==-1?r.slice(0,e):r};var u=process.env.NODE_ENV!=="development"?/node_modules\/refinedev\/(?<name>.*?)\//:/\/refine\/packages\/(?<name>.*?)\//;var _=r=>r?!!r.match(u):!1;var R=r=>{var n;if(!r)return;let e=r.match(u),s=(n=e==null?void 0:e.groups)==null?void 0:n.name;if(s)return`@refinedev/${s}`};function l(){if(process.env.NODE_ENV!=="development")return[];try{let r=new Error,e=g.default.parse(r);return T(e).map(t=>({file:t.fileName,line:t.lineNumber,column:t.columnNumber,function:t.functionName,isRefine:_(t.fileName),packageName:R(t.fileName)})).filter(t=>t.function).slice(1)}catch{return[]}}var m=require("@refinedev/devtools-shared"),v=(r,e)=>{if(m.scopes[r]==="auth")return null;if(r==="useCan")return e?"key[1].resource":"key[1]";if(m.scopes[r]==="audit-log")return r==="useLog"?"variables.resource":"key[1]";if(m.scopes[r]==="data"){if(r==="useCustom"||r==="useCustomMutation")return null;switch(r){case"useList":case"useInfiniteList":case"useOne":case"useMany":return e?"key[1]":"key[2]";case"useCreate":case"useCreateMany":case"useDelete":case"useDeleteMany":case"useUpdate":case"useUpdateMany":return"variables.resource"}}return null};function I(r,e){if(process.env.NODE_ENV!=="development")return{hookName:"",trace:[],resourcePath:null,legacyKey:!1};let s=l().slice(1),n=v(r,e);return{hookName:r,trace:s,resourcePath:n,legacyKey:e}}var x=require("@refinedev/devtools-shared"),c=E(require("react"));var i=require("@refinedev/devtools-shared");var y=(r,e)=>{let s=e==null?void 0:e.map(t=>`${t.file}:${t.line}:${t.column}#${t.function}-${t.packageName}-${t.isRefine?1:0}`);return JSON.stringify([...r??[],...s??[]])};var P=r=>e=>{var n;if(!((n=e==null?void 0:e.meta)!=null&&n.trace))return;let s=e==null?void 0:e.meta;new Promise(t=>{var a,o;(0,i.send)(r,i.DevtoolsEvent.ACTIVITY,{type:"mutation",identifier:y(e==null?void 0:e.options.mutationKey,(a=e==null?void 0:e.meta)==null?void 0:a.trace),key:e==null?void 0:e.options.mutationKey,status:e==null?void 0:e.state.status,state:e==null?void 0:e.state,variables:(o=e==null?void 0:e.state)==null?void 0:o.variables,...s}),t()})},k=r=>e=>{var n;if(!((n=e==null?void 0:e.meta)!=null&&n.trace))return;let s=e==null?void 0:e.meta;new Promise(t=>{var a;(0,i.send)(r,i.DevtoolsEvent.ACTIVITY,{type:"query",identifier:y(e.queryKey,(a=e.meta)==null?void 0:a.trace),key:e.queryKey,status:e.state.status,state:e.state,...s}),t()})};var C=process.env.NODE_ENV!=="development"?()=>({}):r=>{let{ws:e}=(0,c.useContext)(x.DevToolsContext),s=c.default.useRef(),n=c.default.useRef();return c.default.useEffect(()=>{if(!e)return()=>0;let t=r.getQueryCache(),a=k(e);return t.getAll().forEach(a),s.current=t.subscribe(({query:o,type:f})=>(f==="added"||f==="updated")&&a(o)),()=>{var o;(o=s.current)==null||o.call(s)}},[e,r]),c.default.useEffect(()=>{if(!e)return()=>0;let t=r.getMutationCache(),a=P(e);return t.getAll().forEach(a),n.current=t.subscribe(({mutation:o,type:f})=>(f==="added"||f==="updated")&&a(o)),()=>{var o;(o=n.current)==null||o.call(n)}},[e,r]),{}};
//# sourceMappingURL=index.js.map