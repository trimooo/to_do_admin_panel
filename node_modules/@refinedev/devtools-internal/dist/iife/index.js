"use client"
(()=>{var G=Object.create;var g=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,X=Object.prototype.hasOwnProperty;var _=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var j=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Q(e))!X.call(t,s)&&s!==r&&g(t,s,{get:()=>e[s],enumerable:!(o=K(e,s))||o.enumerable});return t};var p=(t,e,r)=>(r=t!=null?G(U(t)):{},j(e||!t||!t.__esModule?g(r,"default",{value:t,enumerable:!0}):r,t));var y=$((_e,k)=>{"use client";var J=Object.create,v=Object.defineProperty,W=Object.getOwnPropertyDescriptor,B=Object.getOwnPropertyNames,z=Object.getPrototypeOf,Z=Object.prototype.hasOwnProperty,q=(t,e)=>{for(var r in e)v(t,r,{get:e[r],enumerable:!0})},N=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of B(e))!Z.call(t,s)&&s!==r&&v(t,s,{get:()=>e[s],enumerable:!(o=W(e,s))||o.enumerable});return t},ee=(t,e,r)=>(r=t!=null?J(z(t)):{},N(e||!t||!t.__esModule?v(r,"default",{value:t,enumerable:!0}):r,t)),te=t=>N(v({},"__esModule",{value:!0}),t),h={};q(h,{DevToolsContext:()=>b,DevToolsContextProvider:()=>se,DevtoolsEvent:()=>C,hooksByScope:()=>re,receive:()=>A,scopes:()=>R,send:()=>S});k.exports=te(h);var C=(t=>(t.RELOAD="devtools:reload",t.DEVTOOLS_INIT="devtools:init",t.DEVTOOLS_HANDSHAKE="devtools:handshake",t.DEVTOOLS_ALREADY_CONNECTED="devtools:already-connected",t.ACTIVITY="devtools:send-activity",t.DEVTOOLS_ACTIVITY_UPDATE="devtools:activity-update",t.DEVTOOLS_CONNECTED_APP="devtools:connected-app",t.DEVTOOLS_DISCONNECTED_APP="devtools:disconnected-app",t.DEVTOOLS_HIGHLIGHT_IN_MONITOR="devtools:highlight-in-monitor",t.DEVTOOLS_HIGHLIGHT_IN_MONITOR_ACTION="devtools:highlight-in-monitor-action",t.DEVTOOLS_LOGIN_SUCCESS="devtools:login-success",t.DEVTOOLS_RELOAD_AFTER_LOGIN="devtools:reload-after-login",t))(C||{}),R={useCan:"access-control",useLog:"audit-log",useLogList:"audit-log",useCreate:"data",useCreateMany:"data",useCustom:"data",useCustomMutation:"data",useDelete:"data",useDeleteMany:"data",useInfiniteList:"data",useList:"data",useMany:"data",useOne:"data",useUpdate:"data",useUpdateMany:"data",useForgotPassword:"auth",useGetIdentity:"auth",useIsAuthenticated:"auth",useLogin:"auth",useLogout:"auth",useOnError:"auth",usePermissions:"auth",useRegister:"auth",useUpdatePassword:"auth"},re=Object.entries(R).reduce((t,[e,r])=>(t[r]||(t[r]=[]),t[r].push(e),t),{}),u=ee(_("react"));async function S(t,e,r){if(t.readyState!==t.OPEN){await new Promise(o=>{let s=()=>{t.send(JSON.stringify({event:e,payload:r})),o(),t.removeEventListener("open",s)};t.addEventListener("open",s)});return}t.send(JSON.stringify({event:e,payload:r}))}function A(t,e,r){let o=s=>{let{event:a,payload:n}=JSON.parse(s.data);e===a&&r(n)};return t.addEventListener("message",o),()=>{t.removeEventListener("message",o)}}var b=u.default.createContext({__devtools:!1,port:5002,url:"localhost",secure:!1,ws:null}),se=({__devtools:t,port:e,children:r})=>{let[o,s]=u.default.useState({__devtools:t??!1,port:e??5002,url:"localhost",secure:!1,ws:null}),[a,n]=u.default.useState(null);u.default.useEffect(()=>{let d=new WebSocket(`${o.secure?"wss":"ws"}://localhost:${o.port}`),T=A(d,"devtools:handshake",H=>{s(F=>({...F,devtoolsUrl:H.url})),T()});return d.addEventListener("open",()=>{o.__devtools||S(d,"devtools:init",{url:window.location.origin})}),n(d),()=>{T(),d.close(1e3,window.location.origin)}},[]);let c=u.default.useMemo(()=>({...o,ws:a}),[o,a]);return u.default.createElement(b.Provider,{value:c},r)}});var P=p(_("error-stack-parser"));var Y="renderWithHooks",I=t=>{let e=t.findIndex(r=>r.functionName===Y);return e!==-1?t.slice(0,e):t};var f=process.env.NODE_ENV!=="development"?/node_modules\/refinedev\/(?<name>.*?)\//:/\/refine\/packages\/(?<name>.*?)\//;var D=t=>t?!!t.match(f):!1;var L=t=>{var o;if(!t)return;let e=t.match(f),r=(o=e==null?void 0:e.groups)==null?void 0:o.name;if(r)return`@refinedev/${r}`};function m(){if(process.env.NODE_ENV!=="development")return[];try{let t=new Error,e=P.default.parse(t);return I(e).map(s=>({file:s.fileName,line:s.lineNumber,column:s.columnNumber,function:s.functionName,isRefine:D(s.fileName),packageName:L(s.fileName)})).filter(s=>s.function).slice(1)}catch{return[]}}var E=p(y()),x=(t,e)=>{if(E.scopes[t]==="auth")return null;if(t==="useCan")return e?"key[1].resource":"key[1]";if(E.scopes[t]==="audit-log")return t==="useLog"?"variables.resource":"key[1]";if(E.scopes[t]==="data"){if(t==="useCustom"||t==="useCustomMutation")return null;switch(t){case"useList":case"useInfiniteList":case"useOne":case"useMany":return e?"key[1]":"key[2]";case"useCreate":case"useCreateMany":case"useDelete":case"useDeleteMany":case"useUpdate":case"useUpdateMany":return"variables.resource"}}return null};function oe(t,e){if(process.env.NODE_ENV!=="development")return{hookName:"",trace:[],resourcePath:null,legacyKey:!1};let r=m().slice(1),o=x(t,e);return{hookName:t,trace:r,resourcePath:o,legacyKey:e}}var V=p(y()),i=p(_("react"));var l=p(y());var O=(t,e)=>{let r=e==null?void 0:e.map(s=>`${s.file}:${s.line}:${s.column}#${s.function}-${s.packageName}-${s.isRefine?1:0}`);return JSON.stringify([...t??[],...r??[]])};var w=t=>e=>{var o;if(!((o=e==null?void 0:e.meta)!=null&&o.trace))return;let r=e==null?void 0:e.meta;new Promise(s=>{var a,n;(0,l.send)(t,l.DevtoolsEvent.ACTIVITY,{type:"mutation",identifier:O(e==null?void 0:e.options.mutationKey,(a=e==null?void 0:e.meta)==null?void 0:a.trace),key:e==null?void 0:e.options.mutationKey,status:e==null?void 0:e.state.status,state:e==null?void 0:e.state,variables:(n=e==null?void 0:e.state)==null?void 0:n.variables,...r}),s()})},M=t=>e=>{var o;if(!((o=e==null?void 0:e.meta)!=null&&o.trace))return;let r=e==null?void 0:e.meta;new Promise(s=>{var a;(0,l.send)(t,l.DevtoolsEvent.ACTIVITY,{type:"query",identifier:O(e.queryKey,(a=e.meta)==null?void 0:a.trace),key:e.queryKey,status:e.state.status,state:e.state,...r}),s()})};var ae=process.env.NODE_ENV!=="development"?()=>({}):t=>{let{ws:e}=(0,i.useContext)(V.DevToolsContext),r=i.default.useRef(),o=i.default.useRef();return i.default.useEffect(()=>{if(!e)return()=>0;let s=t.getQueryCache(),a=M(e);return s.getAll().forEach(a),r.current=s.subscribe(({query:n,type:c})=>(c==="added"||c==="updated")&&a(n)),()=>{var n;(n=r.current)==null||n.call(r)}},[e,t]),i.default.useEffect(()=>{if(!e)return()=>0;let s=t.getMutationCache(),a=w(e);return s.getAll().forEach(a),o.current=s.subscribe(({mutation:n,type:c})=>(c==="added"||c==="updated")&&a(n)),()=>{var n;(n=o.current)==null||n.call(o)}},[e,t]),{}};})();
//# sourceMappingURL=index.js.map